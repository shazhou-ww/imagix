# å®ä½“è¯¦æƒ…é¡µè®¾è®¡æ–¹æ¡ˆ

## 1. èƒŒæ™¯ä¸ç›®æ ‡

### ç°çŠ¶

å½“å‰æ‰€æœ‰å®ä½“ï¼ˆè§’è‰²ã€äº‹ç‰©ã€å…³ç³»ã€åœ°ç‚¹ã€äº‹ä»¶ã€æ•…äº‹ã€åˆ†ç±»ã€å±æ€§å®šä¹‰ï¼‰å‡ä»¥**åˆ—è¡¨é¡µ + å¼¹çª—**çš„æ¨¡å¼è¿›è¡ŒæŸ¥çœ‹å’Œç¼–è¾‘ã€‚è¿™ç§æ¨¡å¼åœ¨å®ä½“æ•°é‡å°‘æ—¶å°šå¯ï¼Œä½†éšç€ä¸–ç•Œæ•°æ®å¢é•¿ï¼Œå­˜åœ¨ä»¥ä¸‹ä¸è¶³ï¼š

- **ä¿¡æ¯å¯†åº¦ä¸è¶³**ï¼šå¡ç‰‡ä¸Šåªèƒ½å±•ç¤ºæ‘˜è¦ï¼Œæ— æ³•çºµè§ˆä¸€ä¸ªå®ä½“çš„å®Œæ•´ç”»åƒ
- **å…³è”ä¿¡æ¯å‰²è£‚**ï¼šæŸ¥çœ‹è§’è‰²çš„äº‹ä»¶ã€å…³ç³»ã€çŠ¶æ€éœ€è¦åœ¨å¤šä¸ªé¡µé¢ä¹‹é—´è·³è½¬
- **ç¼–è¾‘ä½“éªŒç¢ç‰‡åŒ–**ï¼šæ‰€æœ‰ç¼–è¾‘éƒ½åœ¨å¼¹çª—ä¸­å®Œæˆï¼Œæ— æ³•åŒæ—¶æŸ¥çœ‹ä¸Šä¸‹æ–‡
- **è·¨å®ä½“å¯¼èˆªä¸ä¾¿**ï¼šä»…é  hash æ»šåŠ¨å®šä½ï¼Œç¼ºä¹çœŸæ­£çš„å®ä½“é—´è¶…é“¾æ¥

### ç›®æ ‡

ä¸ºä»¥ä¸‹ 8 ç±»å®ä½“æ–°å¢ç‹¬ç«‹çš„**è¯¦æƒ…é¡µï¼ˆDetail Pageï¼‰**ï¼š

| ä¼˜å…ˆçº§ | å®ä½“ | è·¯ç”± |
|--------|------|------|
| P0 | è§’è‰² Character | `/worlds/:worldId/characters/:charId` |
| P0 | äº‹ç‰© Thing | `/worlds/:worldId/things/:thingId` |
| P0 | äº‹ä»¶ Event | `/worlds/:worldId/events/:eventId` |
| P1 | å…³ç³» Relationship | `/worlds/:worldId/relationships/:relId` |
| P1 | åœ°ç‚¹ Place | `/worlds/:worldId/places/:placeId` |
| P1 | æ•…äº‹ Story | `/worlds/:worldId/stories/:storyId` |
| P2 | å±æ€§å®šä¹‰ Attribute | `/worlds/:worldId/attributes/:adfId` |
| P2 | åˆ†ç±»èŠ‚ç‚¹ Taxonomy | `/worlds/:worldId/taxonomy/:tree/:nodeId` |

è®¾è®¡åŸåˆ™ï¼š
- **åˆ—è¡¨é¡µä¿æŒä¸å˜**ï¼Œè¯¦æƒ…é¡µä½œä¸ºè¡¥å……è€Œéæ›¿ä»£
- **ä»åˆ—è¡¨åˆ°è¯¦æƒ…**ï¼šå¡ç‰‡/è¡Œå¯ç‚¹å‡»è¿›å…¥è¯¦æƒ…ï¼›è¯¦æƒ…é¡µé¡¶éƒ¨æä¾›ã€Œè¿”å›åˆ—è¡¨ã€
- **è¯¦æƒ…é¡µå†…èšåˆå…³è”æ•°æ®**ï¼šä¸€ä¸ªé¡µé¢çœ‹åˆ°ä¸æ­¤å®ä½“ç›¸å…³çš„æ‰€æœ‰ä¿¡æ¯
- **å°±åœ°ç¼–è¾‘**ï¼šè¯¦æƒ…é¡µå†…å¯ç›´æ¥ç¼–è¾‘å­—æ®µï¼Œå‡å°‘å¼¹çª—å±‚çº§

---

## 2. æ•´ä½“æ¶æ„

### 2.1 è·¯ç”±ç»“æ„

```
/worlds/:worldId/
â”œâ”€â”€ characters/                  â† CharacterListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :charId                  â† CharacterDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ things/                      â† ThingListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :thingId                 â† ThingDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ places/                      â† PlaceListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :placeId                 â† PlaceDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ relationships/               â† RelationshipListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :relId                   â† RelationshipDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ events/                      â† EventListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :eventId                 â† EventDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ stories/                     â† StoryListPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :storyId                 â† StoryDetailPageï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ attributes/                  â† AttributeDefinitionPageï¼ˆä¿ç•™ï¼‰
â”‚   â””â”€â”€ :adfId                   â† AttributeDetailPageï¼ˆæ–°å¢ï¼‰
â””â”€â”€ taxonomy/:tree/              â† TaxonomyPageï¼ˆä¿ç•™ï¼‰
    â””â”€â”€ :nodeId                  â† TaxonomyNodeDetailPageï¼ˆæ–°å¢ï¼‰
```

### 2.2 å…¬å…±ç»„ä»¶

æ–°å¢ä»¥ä¸‹å¤ç”¨ç»„ä»¶ï¼š

| ç»„ä»¶ | ç”¨é€” |
|------|------|
| `DetailPageHeader` | è¯¦æƒ…é¡µé¡¶éƒ¨ï¼šé¢åŒ…å±‘ + å®ä½“åç§° + æ“ä½œæŒ‰é’®ï¼ˆç¼–è¾‘/åˆ é™¤/è¿”å›ï¼‰ |
| `EntityLink` | è¡Œå†…å®ä½“å¼•ç”¨ Chipï¼Œç‚¹å‡»è·³è½¬åˆ°å¯¹åº”è¯¦æƒ…é¡µ |
| `RelatedEventList` | å…³è”äº‹ä»¶æ—¶é—´çº¿ï¼ˆå¤ç”¨äºè§’è‰²ã€äº‹ç‰©ã€å…³ç³»è¯¦æƒ…é¡µï¼‰ |
| `RelatedRelationshipList` | å…³è”å…³ç³»åˆ—è¡¨ï¼ˆå¤ç”¨äºè§’è‰²ã€äº‹ç‰©è¯¦æƒ…é¡µï¼‰ |
| `EntityStatePanel` | å®ä½“çŠ¶æ€é¢æ¿ï¼Œå±•ç¤ºæŸæ—¶é—´ç‚¹çš„å±æ€§å€¼å¿«ç…§ |
| `EditableField` | å¯å°±åœ°ç¼–è¾‘çš„å­—æ®µç»„ä»¶ï¼ˆç‚¹å‡»åˆ‡æ¢ä¸ºè¾“å…¥æ¡†ï¼‰ |
| `TimelineView` | æ—¶é—´çº¿å¯è§†åŒ–ç»„ä»¶ï¼Œç”¨äºäº‹ä»¶å±•ç¤º |

### 2.3 å¯¼èˆªæ”¹é€ 

**åˆ—è¡¨é¡µæ”¹é€ **ï¼ˆæ‰€æœ‰åˆ—è¡¨é¡µéƒ½éœ€æ”¹åŠ¨ï¼‰ï¼š
- å¡ç‰‡/è¡Œå¢åŠ ç‚¹å‡»äº‹ä»¶ï¼Œ`navigate` åˆ°è¯¦æƒ…é¡µ
- å¡ç‰‡ä¸Šä¿ç•™å¿«æ·æ“ä½œæŒ‰é’®ï¼ˆç¼–è¾‘ã€åˆ é™¤ï¼‰ï¼Œä½†ç‚¹å‡»åç§°è¿›å…¥è¯¦æƒ…
- ç§»é™¤ hash-scroll æ–¹å¼çš„å®šä½ï¼Œç»Ÿä¸€æ”¹ä¸ºè¯¦æƒ…é¡µé“¾æ¥

**è·¨å®ä½“é“¾æ¥**ï¼ˆ`EntityLink` ç»„ä»¶ï¼‰ï¼š
- è‡ªåŠ¨æ ¹æ® entity ID å‰ç¼€åˆ¤æ–­ç±»å‹ï¼Œç”Ÿæˆæ­£ç¡®çš„è·¯ç”±
- å±•ç¤ºå®ä½“åç§° Chipï¼Œç‚¹å‡»è·³è½¬åˆ°å¯¹åº”è¯¦æƒ…é¡µ
- ç”¨äºæ›¿ä»£å½“å‰å„é¡µé¢ä¸­çš„ `onClick navigate with hash` æ¨¡å¼

---

## 3. å„è¯¦æƒ…é¡µè®¾è®¡

### 3.1 è§’è‰²è¯¦æƒ…é¡µ `CharacterDetailPage`

**è·¯ç”±**: `/worlds/:worldId/characters/:charId`

**æ•°æ®ä¾èµ–**:
- `useCharacter(worldId, charId)` â€” è§’è‰²åŸºæœ¬ä¿¡æ¯
- `useTaxonomyTree(worldId, "CHAR")` â€” åˆ†ç±»èŠ‚ç‚¹åç§°è§£æ
- `useEntityState(worldId, charId)` â€” å½“å‰çŠ¶æ€å¿«ç…§ï¼ˆå¯é€‰æ—¶é—´ç‚¹ï¼‰
- Entity Events API `/worlds/:worldId/entities/:entityId/events` â€” ç›¸å…³äº‹ä»¶
- Entity Relationships API `/worlds/:worldId/entities/:entityId/relationships` â€” ç›¸å…³å…³ç³»
- `useAttributeDefinitions(worldId)` â€” å±æ€§åç§°è§£æ

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›è§’è‰²åˆ—è¡¨    è§’è‰² > å¼ ä¸‰ä¸°                    [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åç§°: å¼ ä¸‰ä¸°                                     â”‚   â”‚
â”‚  â”‚ æè¿°: æ­¦å½“æ´¾å¼€å±±ç¥–å¸ˆâ€¦â€¦                            â”‚   â”‚
â”‚  â”‚ åˆ†ç±»: ç”Ÿç‰© â€º äººç±» â€º ä¿®ä»™è€…                        â”‚   â”‚
â”‚  â”‚ ç”Ÿå‘½å‘¨æœŸ: ğŸŸ¢ å­˜æ´»  è¯ç”Ÿäº: 1247å¹´                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å½“å‰çŠ¶æ€ï¼ˆå±æ€§å¿«ç…§ï¼‰â”€â”€â”€â”€â”€â”€ [æ—¶é—´é€‰æ‹©å™¨] â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¿®ä¸ºå¢ƒç•Œ: å…ˆå¤©    çµæ ¹: é‡‘      å¹´é¾„: 112        â”‚   â”‚
â”‚  â”‚ é—¨æ´¾: æ­¦å½“       æˆ˜åŠ›: 9999    å­˜æ´»: true        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å…³ç³» â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [+ æ–°å»ºå…³ç³»] â”€â”€â”   â”‚
â”‚  â”‚ å¸ˆå¾’ â†’ [å®‹è¿œæ¡¥]  å»ºç«‹äº: 1260å¹´                  â”‚   â”‚
â”‚  â”‚ å¸ˆå¾’ â†’ [å¼ ç¿ å±±]  å»ºç«‹äº: 1270å¹´   å·²è§£é™¤          â”‚   â”‚
â”‚  â”‚ å®¿æ•Œ â† [èµµæ•]   å»ºç«‹äº: 1340å¹´                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ äº‹ä»¶æ—¶é—´çº¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— 1247å¹´  è¯ç”Ÿ [ç³»ç»Ÿ]                            â”‚   â”‚
â”‚  â”‚ â— 1260å¹´  ä¼ æˆå®‹è¿œæ¡¥æ­¦åŠŸ                          â”‚   â”‚
â”‚  â”‚ â— 1300å¹´  é—­å…³ä¿®ç‚¼çªç ´å…ˆå¤©å¢ƒ                       â”‚   â”‚
â”‚  â”‚ â— 1340å¹´  ä¸èµµæ•åœ¨å…‰æ˜é¡¶å¯¹å†³                       â”‚   â”‚
â”‚  â”‚   ...æŸ¥çœ‹æ›´å¤š                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. åŸºæœ¬ä¿¡æ¯åŒºåŸŸæ”¯æŒå°±åœ°ç¼–è¾‘ï¼ˆåç§°ã€æè¿°ã€åˆ†ç±»ï¼‰
2. çŠ¶æ€é¢æ¿æ”¯æŒæ—¶é—´ç‚¹é€‰æ‹©å™¨ï¼ŒæŸ¥çœ‹ä»»æ„å†å²æ—¶é—´ç‚¹çš„å±æ€§å¿«ç…§
3. å…³ç³»åˆ—è¡¨å±•ç¤ºæ‰€æœ‰ç›¸å…³å…³ç³»ï¼ˆå«æ–¹å‘æ ‡è¯†ï¼‰ï¼Œå…³ç³»å®ä½“åå¯ç‚¹å‡»è·³è½¬
4. äº‹ä»¶æ—¶é—´çº¿æŒ‰æ—¶é—´æ’åºï¼Œäº‹ä»¶å¡ç‰‡å¯å±•å¼€æŸ¥çœ‹è¯¦æƒ…ï¼Œç‚¹å‡»è·³è½¬åˆ°äº‹ä»¶è¯¦æƒ…é¡µ
5. ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šå­˜æ´»çŠ¶æ€æ—¶æ˜¾ç¤ºã€Œæ ‡è®°æ­»äº¡ã€æŒ‰é’®ï¼›å·²æ­»äº¡æ—¶æ˜¾ç¤ºã€Œæ’¤é”€æ­»äº¡ã€æŒ‰é’®

---

### 3.2 äº‹ç‰©è¯¦æƒ…é¡µ `ThingDetailPage`

**è·¯ç”±**: `/worlds/:worldId/things/:thingId`

**ç»“æ„ä¸è§’è‰²è¯¦æƒ…é¡µé«˜åº¦ä¸€è‡´**ï¼ŒåŒºåˆ«ï¼š
- åˆ†ç±»ä½¿ç”¨ `THING` æ ‘
- ç”Ÿå‘½å‘¨æœŸç”¨è¯­ä»ã€Œè¯ç”Ÿ/æ­»äº¡ã€æ”¹ä¸ºã€Œåˆ›å»º/æ¶ˆäº¡ã€
- å…¶ä½™å¸ƒå±€ï¼ˆåŸºæœ¬ä¿¡æ¯ã€çŠ¶æ€é¢æ¿ã€å…³ç³»åˆ—è¡¨ã€äº‹ä»¶æ—¶é—´çº¿ï¼‰å®Œå…¨å¤ç”¨

---

### 3.3 äº‹ä»¶è¯¦æƒ…é¡µ `EventDetailPage`

**è·¯ç”±**: `/worlds/:worldId/events/:eventId`

**æ•°æ®ä¾èµ–**:
- `useEvent(worldId, eventId)` â€” äº‹ä»¶åŸºæœ¬ä¿¡æ¯
- `usePlace(worldId, placeId)` â€” åœ°ç‚¹åç§°
- `useEventLinks(worldId)` â€” å…³è”äº‹ä»¶
- `useCharacters(worldId)` + `useThings(worldId)` â€” å‚ä¸å®ä½“åç§°è§£æ
- `useAttributeDefinitions(worldId)` â€” å±æ€§åç§°è§£æ
- `useRelationships(worldId)` â€” å…³ç³»åç§°è§£æ

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›äº‹ä»¶åˆ—è¡¨    äº‹ä»¶ > å…‰æ˜é¡¶ä¹‹æˆ˜              [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ—¶é—´: 1340å¹´                                      â”‚   â”‚
â”‚  â”‚ æŒç»­æ—¶é—´: 3å¤©                                      â”‚   â”‚
â”‚  â”‚ åœ°ç‚¹: [å…‰æ˜é¡¶] (ç‚¹å‡»è·³è½¬)                          â”‚   â”‚
â”‚  â”‚ å†…å®¹: å…­å¤§é—¨æ´¾å›´æ”»å…‰æ˜é¡¶ï¼Œå¼ æ— å¿ŒæŒºèº«è€Œå‡ºè§£æ•‘â€¦â€¦      â”‚   â”‚
â”‚  â”‚ ç±»å‹: ğŸ· æ™®é€šäº‹ä»¶                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ çŠ¶æ€å½±å“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”Œ å®ä½“å±æ€§å˜æ›´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ [å¼ æ— å¿Œ] ä¿®ä¸ºå¢ƒç•Œ: å…ˆå¤© â†’ åŒ–ç¥             â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [å¼ æ— å¿Œ] æˆ˜åŠ›: 8000 â†’ 9500                 â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ [èµµæ•]   é˜µè¥: å…ƒæœ â†’ ä¸­ç«‹                 â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ â”Œ å…³ç³»å±æ€§å˜æ›´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ [å¼ æ— å¿Œâ†’èµµæ•] äº²å¯†åº¦: 0 â†’ 50              â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å‚ä¸å®ä½“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ è§’è‰²: [å¼ æ— å¿Œ] [èµµæ•] [å¼ ä¸‰ä¸°] [å®‹è¿œæ¡¥]         â”‚   â”‚
â”‚  â”‚ äº‹ç‰©: [å€šå¤©å‰‘] [å± é¾™åˆ€]                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å…³è”äº‹ä»¶ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [+ æ–°å»ºå…³è”] â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â†” 1339å¹´ èµµæ•å¯†è°‹å›´æ”»è®¡åˆ’  "å› æœå‰å¯¼"          â”‚   â”‚
â”‚  â”‚ â†” 1341å¹´ å¼ æ— å¿Œèµµæ•ç»“ç›Ÿ    "åç»­å½±å“"          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. åŸºæœ¬ä¿¡æ¯æ”¯æŒå°±åœ°ç¼–è¾‘ï¼ˆæ—¶é—´ã€æŒç»­æ—¶é—´ã€åœ°ç‚¹ã€å†…å®¹ï¼‰
2. çŠ¶æ€å½±å“åŒºåŸŸå¯è§†åŒ–å±•ç¤ºå±æ€§å˜æ›´ï¼ˆbefore â†’ after å¯¹æ¯”ï¼‰ï¼Œå®ä½“åå¯ç‚¹å‡»
3. å‚ä¸å®ä½“ä» `impacts` ä¸­æå–æ‰€æœ‰æ¶‰åŠçš„å®ä½“ IDï¼Œå±•ç¤ºä¸ºå¯ç‚¹å‡»çš„ EntityLink
4. å…³è”äº‹ä»¶åˆ—è¡¨å±•ç¤ºåŒå‘å…³è”ï¼Œæ¯æ¡å¯å±•å¼€/é“¾æ¥åˆ°å…³è”äº‹ä»¶è¯¦æƒ…é¡µ
5. ç³»ç»Ÿäº‹ä»¶ï¼ˆepoch/birth/death/creation/destructionï¼‰æ ‡è®°ä¸ºåªè¯»

---

### 3.4 å…³ç³»è¯¦æƒ…é¡µ `RelationshipDetailPage`

**è·¯ç”±**: `/worlds/:worldId/relationships/:relId`

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›å…³ç³»åˆ—è¡¨    å…³ç³» > å¼ ä¸‰ä¸° â†’ å®‹è¿œæ¡¥       [åˆ é™¤] [è§£é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç±»å‹: å¸ˆå¾’  (åˆ†ç±»: äººé™…å…³ç³» â€º å¸ˆå¾’å…³ç³»)           â”‚   â”‚
â”‚  â”‚ æºå®ä½“: [å¼ ä¸‰ä¸°] â†’ ç›®æ ‡å®ä½“: [å®‹è¿œæ¡¥]             â”‚   â”‚
â”‚  â”‚ ç”Ÿå‘½å‘¨æœŸ: ğŸŸ¢ å­˜ç»­ä¸­   å»ºç«‹äº: 1260å¹´              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å…³ç³»å±æ€§ï¼ˆå½“å‰çŠ¶æ€ï¼‰â”€â”€â”€â”€ [æ—¶é—´é€‰æ‹©å™¨] â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â”Œ æ­£å‘ (å¼ ä¸‰ä¸°â†’å®‹è¿œæ¡¥) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ ç§°è°“: å¤§å¼Ÿå­   äº²å¯†åº¦: 95                â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚ â”Œ åå‘ (å®‹è¿œæ¡¥â†’å¼ ä¸‰ä¸°) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ ç§°è°“: å¸ˆçˆ¶    å°Šæ•¬åº¦: 100                â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ ç›¸å…³äº‹ä»¶æ—¶é—´çº¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— 1260å¹´  å¼ ä¸‰ä¸°æ”¶å®‹è¿œæ¡¥ä¸ºå¤§å¼Ÿå­ [ç³»ç»Ÿ]        â”‚   â”‚
â”‚  â”‚ â— 1280å¹´  å¸ˆå¾’è”æ‰‹æ–—è’™å¤æ­¦å£«                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. å±•ç¤ºå…³ç³»çš„åŒæ–¹å®ä½“ï¼ˆå¯ç‚¹å‡»è·³è½¬åˆ°å„è‡ªçš„è¯¦æƒ…é¡µï¼‰
2. å±æ€§é¢æ¿æŒ‰æ–¹å‘ï¼ˆfromâ†’to / toâ†’fromï¼‰åˆ†åˆ«å±•ç¤º
3. äº‹ä»¶æ—¶é—´çº¿å¤ç”¨ `RelatedEventList` ç»„ä»¶
4. ç”Ÿå‘½å‘¨æœŸæ“ä½œï¼šè§£é™¤å…³ç³» / æ’¤é”€è§£é™¤

---

### 3.5 åœ°ç‚¹è¯¦æƒ…é¡µ `PlaceDetailPage`

**è·¯ç”±**: `/worlds/:worldId/places/:placeId`

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›åœ°ç‚¹åˆ—è¡¨    åœ°ç‚¹ > ä¸´å®‰åŸ > çŸ¥å‘³æ¥¼         [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åç§°: çŸ¥å‘³æ¥¼                                      â”‚   â”‚
â”‚  â”‚ æè¿°: ä¸´å®‰åŸä¸­æœ€å¤§çš„é…’æ¥¼â€¦â€¦                         â”‚   â”‚
â”‚  â”‚ ä¸Šçº§åœ°ç‚¹: [ä¸´å®‰åŸ] (ç‚¹å‡»è·³è½¬)                      â”‚   â”‚
â”‚  â”‚ å±‚çº§è·¯å¾„: å¤§å®‹ â€º æ±Ÿå— â€º ä¸´å®‰åŸ â€º çŸ¥å‘³æ¥¼            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å­åœ°ç‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [+ æ–°å»ºå­åœ°ç‚¹] â”€â”€â”   â”‚
â”‚  â”‚ â”œ å¤§å…                                           â”‚   â”‚
â”‚  â”‚ â”œ é›…é—´                                           â”‚   â”‚
â”‚  â”‚ â”” åå¨                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ åœ¨æ­¤å‘ç”Ÿçš„äº‹ä»¶ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— 1340å¹´  å¼ æ— å¿Œä¸èµµæ•åˆæ¬¡ç›¸é‡                    â”‚   â”‚
â”‚  â”‚ â— 1342å¹´  æ­¦æ—å¤§ä¼š                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. å±•ç¤ºå±‚çº§è·¯å¾„é¢åŒ…å±‘ï¼ˆæ¯çº§å¯ç‚¹å‡»ï¼‰
2. å­åœ°ç‚¹åˆ—è¡¨æ ‘å½¢å±•ç¤ºï¼Œå¯ç‚¹å‡»è¿›å…¥å­åœ°ç‚¹è¯¦æƒ…
3. å…³è”äº‹ä»¶ï¼šæŸ¥è¯¢ `placeId === å½“å‰åœ°ç‚¹` çš„æ‰€æœ‰äº‹ä»¶

**æ³¨æ„**: åç«¯ç›®å‰æ²¡æœ‰æŒ‰ placeId æŸ¥è¯¢äº‹ä»¶çš„æ¥å£ï¼Œéœ€è¦**æ–°å¢åç«¯æ¥å£**æˆ–åœ¨å‰ç«¯è¿‡æ»¤ã€‚å»ºè®®æ–°å¢ï¼š
```
GET /worlds/:worldId/places/:placeId/events
```

---

### 3.6 æ•…äº‹è¯¦æƒ…é¡µ `StoryDetailPage`

**è·¯ç”±**: `/worlds/:worldId/stories/:storyId`

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›æ•…äº‹åˆ—è¡¨    æ•…äº‹ > å€šå¤©å± é¾™è®°               [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ ‡é¢˜: å€šå¤©å± é¾™è®°                                  â”‚   â”‚
â”‚  â”‚ ç« èŠ‚æ•°: 12    æƒ…èŠ‚æ•°: 48                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ ç« èŠ‚åˆ—è¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [+ æ·»åŠ ç« èŠ‚] â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¸ ç¬¬ä¸€ç«  å¤©æ¶¯æ€å›ä¸å¯å¿˜                            â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ æƒ…èŠ‚ 1: ğŸ­ å¼ ä¸‰ä¸° | âœï¸ æ­¦ä¾ å¤å…¸é£        â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ > æ­¦å½“å±±é‡‘é¡¶ï¼Œæ™¨å…‰åˆç…§â€¦â€¦                   â”‚   â”‚   â”‚
â”‚  â”‚   â”‚                            [æŸ¥çœ‹] [ç¼–è¾‘]  â”‚   â”‚   â”‚
â”‚  â”‚   â”‚                                          â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ æƒ…èŠ‚ 2: ğŸ­ å®‹è¿œæ¡¥ | âœï¸ ç™½è¯æ–‡             â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ > å®‹è¿œæ¡¥å›å¿†å¹´å°‘æ—¶åˆä¸Šæ­¦å½“â€¦â€¦               â”‚   â”‚   â”‚
â”‚  â”‚   â”‚                          [+ æ·»åŠ æƒ…èŠ‚]     â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚ â–¸ ç¬¬äºŒç«  æ­¦å½“å±±ä¸Šå¤ªææ‹³                            â”‚   â”‚
â”‚  â”‚   ...                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. å°†ç°æœ‰ StoryListPage ä¸­çš„æ‰‹é£ç´å±•å¼€å†…å®¹ï¼ˆç« èŠ‚ + æƒ…èŠ‚ï¼‰æå–åˆ°è¯¦æƒ…é¡µ
2. ç« èŠ‚æ”¯æŒæ‹–æ‹½æ’åºï¼ˆè°ƒæ•´ `chapterIds` é¡ºåºï¼‰
3. æƒ…èŠ‚å±•ç¤ºï¼šå…³è”äº‹ä»¶å¯ç‚¹å‡»ã€è§†è§’è§’è‰²å¯ç‚¹å‡»ã€æ–‡é£æ ‡ç­¾
4. æƒ…èŠ‚å†…å®¹æ”¯æŒå…¨æ–‡æŸ¥çœ‹å’Œå°±åœ°ç¼–è¾‘
5. åˆ—è¡¨é¡µç²¾ç®€ä¸ºä»…å±•ç¤ºæ•…äº‹æ ‡é¢˜ + ç« èŠ‚æ•°ç»Ÿè®¡

---

### 3.7 å±æ€§å®šä¹‰è¯¦æƒ…é¡µ `AttributeDetailPage`

**è·¯ç”±**: `/worlds/:worldId/attributes/:adfId`

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›å±æ€§è¯å…¸    å±æ€§ > ä¿®ä¸ºå¢ƒç•Œ               [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åç§°: ä¿®ä¸ºå¢ƒç•Œ                                    â”‚   â”‚
â”‚  â”‚ ç±»å‹: æšä¸¾ (enum)                                 â”‚   â”‚
â”‚  â”‚ æè¿°: ä¿®ä»™è€…çš„ä¿®ä¸ºç­‰çº§â€¦â€¦                           â”‚   â”‚
â”‚  â”‚ å¯é€‰å€¼: [ç‚¼æ°”] [ç­‘åŸº] [é‡‘ä¸¹] [å…ƒå©´] [åŒ–ç¥] [å¤§ä¹˜]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ ä½¿ç”¨æ­¤å±æ€§çš„åˆ†ç±»èŠ‚ç‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CHAR > ä¿®ä»™è€…                                     â”‚   â”‚
â”‚  â”‚ CHAR > æ•£ä¿®                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å¼•ç”¨æ­¤å±æ€§çš„äº‹ä»¶ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â— 1300å¹´ é—­å…³çªç ´ï¼šå¼ ä¸‰ä¸° ä¿®ä¸ºå¢ƒç•Œ â†’ åŒ–ç¥        â”‚   â”‚
â”‚  â”‚ â— 1250å¹´ åˆå…¥ä¿®é€”ï¼šå®‹è¿œæ¡¥ ä¿®ä¸ºå¢ƒç•Œ â†’ ç‚¼æ°”        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**:
1. å±•ç¤ºå±æ€§çš„å®Œæ•´å®šä¹‰ï¼ˆç±»å‹ã€æšä¸¾å€¼åˆ—è¡¨ã€æè¿°ï¼‰
2. åæŸ¥å“ªäº›åˆ†ç±»èŠ‚ç‚¹å¼•ç”¨äº†æ­¤å±æ€§ï¼ˆéœ€å‰ç«¯éå†åˆ†ç±»æ ‘ï¼‰
3. åæŸ¥å“ªäº›äº‹ä»¶çš„ impacts ä¸­å˜æ›´äº†æ­¤å±æ€§
4. ç³»ç»Ÿå±æ€§æ ‡è®°ä¸ºåªè¯»

---

### 3.8 åˆ†ç±»èŠ‚ç‚¹è¯¦æƒ…é¡µ `TaxonomyNodeDetailPage`

**è·¯ç”±**: `/worlds/:worldId/taxonomy/:tree/:nodeId`

**é¡µé¢å¸ƒå±€**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›åˆ†ç±»ä½“ç³»    CHAR > ç”Ÿç‰© > äººç±» > ä¿®ä»™è€…   [ç¼–è¾‘] [åˆ é™¤] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€ åŸºæœ¬ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åç§°: ä¿®ä»™è€…                                      â”‚   â”‚
â”‚  â”‚ æè¿°: èµ°ä¸Šä¿®ä»™ä¹‹è·¯çš„äººç±»â€¦â€¦                         â”‚   â”‚
â”‚  â”‚ æ‰€å±åˆ†ç±»æ ‘: è§’è‰²åˆ†ç±» (CHAR)                        â”‚   â”‚
â”‚  â”‚ çˆ¶èŠ‚ç‚¹: [äººç±»] (ç‚¹å‡»è·³è½¬)                          â”‚   â”‚
â”‚  â”‚ æ—¶é—´æ´¾ç”Ÿå…¬å¼: { "$age": attributes.$age + ... }   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å­èŠ‚ç‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ [+ æ–°å»ºå­èŠ‚ç‚¹] â”€â”€â”   â”‚
â”‚  â”‚ â”œ å‰‘ä¿® (3ä¸ªå®ä½“)                                  â”‚   â”‚
â”‚  â”‚ â”œ ä¸¹ä¿® (1ä¸ªå®ä½“)                                  â”‚   â”‚
â”‚  â”‚ â”” æ•£ä¿® (5ä¸ªå®ä½“)                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€ å±äºæ­¤åˆ†ç±»çš„å®ä½“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [å¼ ä¸‰ä¸°] [å®‹è¿œæ¡¥] [å¼ ç¿ å±±] [æ®·å¤©æ­£] ...            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**ï¼š
1. ç°æœ‰ TaxonomyPage çš„å³ä¾§è¯¦æƒ…é¢æ¿å·²ç»å®ç°äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œå¯è€ƒè™‘å°†å…¶å‡çº§ä¸ºç‹¬ç«‹è¯¦æƒ…é¡µ
2. å­èŠ‚ç‚¹åˆ—è¡¨å¯ç‚¹å‡»è¿›å…¥å­èŠ‚ç‚¹è¯¦æƒ…
3. å±•ç¤ºä½¿ç”¨æ­¤åˆ†ç±»èŠ‚ç‚¹çš„æ‰€æœ‰è§’è‰²/äº‹ç‰©ï¼ˆæ ¹æ® tree ç±»å‹æŸ¥è¯¢ï¼‰
4. ç³»ç»ŸèŠ‚ç‚¹æ ‡è®°ä¸ºåªè¯»

---

## 4. å…¬å…±ç»„ä»¶è¯¦ç»†è®¾è®¡

### 4.1 `DetailPageHeader`

```tsx
interface DetailPageHeaderProps {
  breadcrumbs: Array<{ label: string; to?: string }>;
  title: string;
  subtitle?: string;
  status?: { label: string; color: "success" | "error" | "warning" };
  actions?: React.ReactNode;  // æ“ä½œæŒ‰é’®æ’æ§½
}
```

ç¤ºæ„ï¼š
```
â† è¿”å›è§’è‰²åˆ—è¡¨ / å¤§å®‹ä¸–ç•Œ / è§’è‰²
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¼ ä¸‰ä¸°                        [ç¼–è¾‘] [ğŸ”´ æ ‡è®°æ­»äº¡] [ğŸ—‘ åˆ é™¤]
ä¿®ä»™è€… Â· ğŸŸ¢ å­˜æ´»
```

### 4.2 `EntityLink`

```tsx
interface EntityLinkProps {
  entityId: string;       // æ ¹æ® ID å‰ç¼€è‡ªåŠ¨è·¯ç”±åˆ°æ­£ç¡®çš„å®ä½“è¯¦æƒ…é¡µ
  worldId: string;
  label?: string;         // å¯é€‰è¦†ç›–æ˜¾ç¤ºåç§°
  variant?: "chip" | "text";
}
```

æ ¹æ® ID å‰ç¼€è‡ªåŠ¨åˆ¤æ–­å®ä½“ç±»å‹ï¼š
| å‰ç¼€ | ç±»å‹ | è·¯ç”± |
|------|------|------|
| `chr` | è§’è‰² | `/worlds/:worldId/characters/:id` |
| `thg` | äº‹ç‰© | `/worlds/:worldId/things/:id` |
| `plc` | åœ°ç‚¹ | `/worlds/:worldId/places/:id` |
| `rel` | å…³ç³» | `/worlds/:worldId/relationships/:id` |
| `evt` | äº‹ä»¶ | `/worlds/:worldId/events/:id` |
| `sty` | æ•…äº‹ | `/worlds/:worldId/stories/:id` |
| `adf` | å±æ€§ | `/worlds/:worldId/attributes/:id` |
| `txn` | åˆ†ç±» | `/worlds/:worldId/taxonomy/:tree/:id` |

### 4.3 `RelatedEventList`

```tsx
interface RelatedEventListProps {
  worldId: string;
  entityId: string;       // æŸ¥è¯¢è¯¥å®ä½“çš„æ‰€æœ‰å…³è”äº‹ä»¶
  maxItems?: number;      // é»˜è®¤æ˜¾ç¤ºæ¡æ•°ï¼Œå¯å±•å¼€
}
```

ä½¿ç”¨ç°æœ‰ API: `GET /worlds/:worldId/entities/:entityId/events`

å±•ç¤ºä¸ºå‚ç›´æ—¶é—´çº¿ï¼Œæ¯ä¸ªäº‹ä»¶é¡¹åŒ…å«ï¼š
- æ—¶é—´ç‚¹æ ‡è®°ï¼ˆåœ†ç‚¹ + ç«–çº¿è¿æ¥ï¼‰
- æ—¶é—´æ˜¾ç¤º
- äº‹ä»¶å†…å®¹æ‘˜è¦ï¼ˆå¯å±•å¼€ï¼‰
- ç³»ç»Ÿäº‹ä»¶æ ‡ç­¾
- ç‚¹å‡»è·³è½¬åˆ°äº‹ä»¶è¯¦æƒ…é¡µ

### 4.4 `RelatedRelationshipList`

```tsx
interface RelatedRelationshipListProps {
  worldId: string;
  entityId: string;       // æŸ¥è¯¢è¯¥å®ä½“çš„æ‰€æœ‰å…³ç³»
  onCreateRelationship?: () => void;
}
```

ä½¿ç”¨ç°æœ‰ API: `GET /worlds/:worldId/entities/:entityId/relationships`

å±•ç¤ºä¸ºåˆ†ç»„åˆ—è¡¨ï¼Œæ¯æ¡å…³ç³»æ˜¾ç¤ºï¼š
- æ–¹å‘æ ‡è¯†ï¼š`â†’`ï¼ˆfrom æ–¹å‘ï¼‰æˆ– `â†`ï¼ˆto æ–¹å‘ï¼‰
- å…³ç³»ç±»å‹åç§°
- å¯¹æ–¹å®ä½“ EntityLink
- ç”Ÿå‘½å‘¨æœŸçŠ¶æ€
- ç‚¹å‡»è·³è½¬åˆ°å…³ç³»è¯¦æƒ…é¡µ

### 4.5 `EntityStatePanel`

```tsx
interface EntityStatePanelProps {
  worldId: string;
  entityId: string;
  defaultTime?: number;   // é»˜è®¤æ—¶é—´ç‚¹ï¼Œundefined è¡¨ç¤ºæœ€æ–°
}
```

ä½¿ç”¨ç°æœ‰ API: `GET /worlds/:worldId/entities/:entityId/state?time=xxx`

åŠŸèƒ½ï¼š
- é¡¶éƒ¨æ—¶é—´é€‰æ‹©å™¨ï¼ˆEpochTimeInputï¼‰ï¼Œé€‰æ‹©æŸ¥çœ‹æ—¶é—´ç‚¹
- å±æ€§å€¼ä»¥è¡¨æ ¼/é”®å€¼å¯¹å½¢å¼å±•ç¤º
- å±æ€§åè§£æä¸ºä¸­æ–‡åç§°ï¼ˆé€šè¿‡ `useAttributeDefinitions`ï¼‰
- ç³»ç»Ÿå±æ€§ï¼ˆ`$alive`, `$age` ç­‰ï¼‰ç‰¹æ®Šå±•ç¤º

---

## 5. åç«¯æ”¹åŠ¨

### 5.1 æ–°å¢æ¥å£

| æ¥å£ | ç”¨é€” | è¯´æ˜ |
|------|------|------|
| `GET /worlds/:worldId/places/:placeId/events` | æŸ¥è¯¢æŸåœ°ç‚¹å‘ç”Ÿçš„äº‹ä»¶ | æŒ‰ `event.placeId` è¿‡æ»¤ |
| `GET /worlds/:worldId/attributes/:adfId/events` | æŸ¥è¯¢æ¶‰åŠæŸå±æ€§çš„äº‹ä»¶ | æŒ‰ `impacts.attributeChanges[].attribute` è¿‡æ»¤ |

### 5.2 ç°æœ‰å¯å¤ç”¨æ¥å£

| æ¥å£ | ç”¨é€” |
|------|------|
| `GET /worlds/:worldId/entities/:entityId/events` | è§’è‰²/äº‹ç‰©/å…³ç³»è¯¦æƒ…é¡µçš„äº‹ä»¶æ—¶é—´çº¿ |
| `GET /worlds/:worldId/entities/:entityId/relationships` | è§’è‰²/äº‹ç‰©è¯¦æƒ…é¡µçš„å…³ç³»åˆ—è¡¨ |
| `GET /worlds/:worldId/entities/:entityId/state?time=xxx` | å®ä½“çŠ¶æ€å¿«ç…§ |
| `GET /worlds/:worldId/characters/:charId` | è§’è‰²è¯¦æƒ… |
| `GET /worlds/:worldId/things/:thingId` | äº‹ç‰©è¯¦æƒ… |
| `GET /worlds/:worldId/places/:placeId` | åœ°ç‚¹è¯¦æƒ… |
| `GET /worlds/:worldId/relationships/:relId` | å…³ç³»è¯¦æƒ… |
| `GET /worlds/:worldId/events/:eventId` | äº‹ä»¶è¯¦æƒ… |
| `GET /worlds/:worldId/stories/:storyId` | æ•…äº‹è¯¦æƒ… |

---

## 6. å‰ç«¯ API Hook æ”¹åŠ¨

### 6.1 æ–°å¢ Hook

```typescript
// useEntityEvents.ts â€” æŸ¥è¯¢å®ä½“çš„å…³è”äº‹ä»¶ï¼ˆè§’è‰²/äº‹ç‰©/å…³ç³»é€šç”¨ï¼‰
export function useEntityEvents(worldId?: string, entityId?: string) { ... }

// useEntityRelationships.ts â€” æŸ¥è¯¢å®ä½“çš„å…³è”å…³ç³»
export function useEntityRelationships(worldId?: string, entityId?: string) { ... }

// usePlaceEvents.ts â€” æŸ¥è¯¢åœ°ç‚¹å…³è”äº‹ä»¶ï¼ˆæ–°æ¥å£ï¼‰
export function usePlaceEvents(worldId?: string, placeId?: string) { ... }
```

### 6.2 ç°æœ‰å¯å¤ç”¨ Hook

ä»¥ä¸‹ Hook å·²å­˜åœ¨ä½†å°šæœªåœ¨å‰ç«¯ä½¿ç”¨ï¼Œå¯ç›´æ¥ç”¨äºè¯¦æƒ…é¡µï¼š

| Hook | æ–‡ä»¶ | ç”¨é€” |
|------|------|------|
| `useCharacter(worldId, charId)` | useCharacters.ts | è§’è‰²è¯¦æƒ… |
| `useThing(worldId, thingId)` | useThings.ts | äº‹ç‰©è¯¦æƒ… |
| `usePlace(worldId, placeId)` | usePlaces.ts | åœ°ç‚¹è¯¦æƒ… |
| `useRelationship(worldId, relId)` | useRelationships.ts | å…³ç³»è¯¦æƒ… |
| `useEvent(worldId, eventId)` | useEvents.ts | äº‹ä»¶è¯¦æƒ… |
| `useStory(worldId, storyId)` | useStories.ts | æ•…äº‹è¯¦æƒ… |
| `useEntityState(worldId, entityId)` | useEntityState.ts | å®ä½“çŠ¶æ€ |
| `useEntityRelationships(worldId, entityId)` | useRelationships.ts | å®ä½“å…³ç³» |

---

## 7. å®æ–½è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½ + P0 å®ä½“ ï¼ˆé¢„ä¼° 3-4 å¤©ï¼‰

| æ­¥éª¤ | å†…å®¹ | é¢„ä¼°å·¥æ—¶ |
|------|------|---------|
| 1.1 | å®ç°å…¬å…±ç»„ä»¶ï¼š`DetailPageHeader`, `EntityLink`, `EditableField` | 0.5 å¤© |
| 1.2 | å®ç° `RelatedEventList`, `RelatedRelationshipList`, `EntityStatePanel` | 1 å¤© |
| 1.3 | æ–°å¢ `useEntityEvents` hookï¼ˆå‰ç«¯è°ƒç”¨å·²æœ‰ entity-events APIï¼‰ | 0.5 å¤© |
| 1.4 | å®ç° `CharacterDetailPage` + è·¯ç”±æ³¨å†Œ | 0.5 å¤© |
| 1.5 | å®ç° `ThingDetailPage`ï¼ˆå¤ç”¨è§’è‰²è¯¦æƒ…é¡µæ¨¡å¼ï¼‰ | 0.5 å¤© |
| 1.6 | å®ç° `EventDetailPage` | 0.5 å¤© |
| 1.7 | æ”¹é€ åˆ—è¡¨é¡µï¼šå¡ç‰‡ç‚¹å‡»è·³è½¬åˆ°è¯¦æƒ…é¡µ | 0.5 å¤© |

### Phase 2: P1 å®ä½“ ï¼ˆé¢„ä¼° 2-3 å¤©ï¼‰

| æ­¥éª¤ | å†…å®¹ | é¢„ä¼°å·¥æ—¶ |
|------|------|---------|
| 2.1 | å®ç° `RelationshipDetailPage` | 0.5 å¤© |
| 2.2 | å®ç° `PlaceDetailPage` + åç«¯æ–°å¢æŒ‰åœ°ç‚¹æŸ¥äº‹ä»¶æ¥å£ | 1 å¤© |
| 2.3 | å®ç° `StoryDetailPage`ï¼Œé‡æ„ç« èŠ‚/æƒ…èŠ‚å±•ç¤º | 1 å¤© |

### Phase 3: P2 å®ä½“ + ä¼˜åŒ– ï¼ˆé¢„ä¼° 1-2 å¤©ï¼‰

| æ­¥éª¤ | å†…å®¹ | é¢„ä¼°å·¥æ—¶ |
|------|------|---------|
| 3.1 | å®ç° `AttributeDetailPage` | 0.5 å¤© |
| 3.2 | å®ç° `TaxonomyNodeDetailPage` | 0.5 å¤© |
| 3.3 | å…¨å±€ä½“éªŒä¼˜åŒ–ï¼šEntityLink æ›¿æ¢ã€å¯¼èˆªä¸€è‡´æ€§ã€Loading/Error çŠ¶æ€ | 0.5 å¤© |

### æ€»è®¡ï¼šé¢„ä¼° 6-9 å¤©

---

## 8. æ–‡ä»¶æ¸…å•

### æ–°å¢é¡µé¢æ–‡ä»¶

```
frontend/src/pages/
â”œâ”€â”€ CharacterDetailPage.tsx    ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ ThingDetailPage.tsx        ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ EventDetailPage.tsx        ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ RelationshipDetailPage.tsx ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ PlaceDetailPage.tsx        ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ StoryDetailPage.tsx        ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ AttributeDetailPage.tsx    ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ TaxonomyNodeDetailPage.tsx ï¼ˆæ–°å¢ï¼‰
```

### æ–°å¢å…¬å…±ç»„ä»¶

```
frontend/src/components/
â”œâ”€â”€ DetailPageHeader.tsx       ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ EntityLink.tsx             ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ EditableField.tsx          ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ RelatedEventList.tsx       ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ RelatedRelationshipList.tsxï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ EntityStatePanel.tsx       ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ TimelineView.tsx           ï¼ˆæ–°å¢ï¼‰
```

### æ–°å¢ Hook

```
frontend/src/api/hooks/
â”œâ”€â”€ useEntityEvents.ts         ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ usePlaceEvents.ts          ï¼ˆæ–°å¢ï¼‰
```

### éœ€è¦ä¿®æ”¹çš„ç°æœ‰æ–‡ä»¶

```
frontend/src/App.tsx                        â€” æ³¨å†Œæ–°è·¯ç”±
frontend/src/pages/CharacterListPage.tsx    â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/ThingListPage.tsx        â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/EventListPage.tsx        â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/RelationshipListPage.tsx â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/PlaceListPage.tsx        â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/StoryListPage.tsx        â€” è¡Œç‚¹å‡»è·³è½¬
frontend/src/pages/AttributeDefinitionPage.tsx â€” å¡ç‰‡ç‚¹å‡»è·³è½¬
frontend/src/pages/TaxonomyPage.tsx         â€” èŠ‚ç‚¹ç‚¹å‡»è·³è½¬
backend/src/app.ts                          â€” æ³¨å†Œæ–°è·¯ç”±ï¼ˆå¦‚éœ€ï¼‰
```

---

## 9. æŠ€æœ¯æ³¨æ„äº‹é¡¹

1. **æ•°æ®é¢„å–**ï¼šä»åˆ—è¡¨é¡µè¿›å…¥è¯¦æƒ…é¡µæ—¶ï¼Œåˆ—è¡¨æ•°æ®å·²åœ¨ React Query ç¼“å­˜ä¸­ï¼Œè¯¦æƒ…é¡µå¯åˆ©ç”¨ `initialData` å‡å°‘é¦–å±åŠ è½½æ—¶é—´
2. **URL ä¿æŒå¯åˆ†äº«**ï¼šæ‰€æœ‰è¯¦æƒ…é¡µä½¿ç”¨ URL å‚æ•°ï¼Œæ”¯æŒç›´æ¥åˆ†äº«é“¾æ¥
3. **é”™è¯¯å¤„ç†**ï¼šå½“å®ä½“ ID ä¸å­˜åœ¨æ—¶ï¼ˆ404ï¼‰ï¼Œå±•ç¤ºå‹å¥½çš„ç©ºçŠ¶æ€é¡µé¢å¹¶æä¾›è¿”å›åˆ—è¡¨çš„é“¾æ¥
4. **å“åº”å¼è®¾è®¡**ï¼šè¯¦æƒ…é¡µåœ¨ç§»åŠ¨ç«¯ä»¥å•åˆ—çºµå‘æ’åˆ—ï¼Œæ¡Œé¢ç«¯å¯ä½¿ç”¨å·¦å³åˆ†æ 
5. **æµè§ˆå™¨åé€€**ï¼šä¿æŒæµè§ˆå™¨å†å²æ ˆæ­£å¸¸å·¥ä½œï¼Œé¿å… `replace` å¯¼èˆª
6. **Entity ID å‰ç¼€æ˜ å°„**ï¼šå¤ç”¨ `shared/protocol/id.ts` ä¸­çš„ `EntityPrefix` åšç»Ÿä¸€çš„ç±»å‹æ¨æ–­å’Œè·¯ç”±ç”Ÿæˆ
